<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Substance - Hydra Visualization</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden; /* Nasconde le barre di scorrimento */
            background-color: black;
        }
        canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body>

    <canvas id="hydra-canvas"></canvas>

    <script src="https://unpkg.com/hydra-synth"></script>

    <script>
        // 1. INIZIALIZZAZIONE DI HYDRA
        // Crea una nuova istanza di Hydra collegata al canvas HTML
        const hydra = new Hydra({
            canvas: document.getElementById("hydra-canvas"),
            detectAudio: false, // Mettiamo false se non serve input microfono
            enableStreamCapture: false
        });

        // 2. LO SCRIPT ESATTO (Copiato dalla versione precedente)
        
        // Impostiamo una risoluzione nitida
        setResolution(1920, 1080);

        // --- BLOCCO PER LA SCRITTA (Generazione Canvas) ---
        const textCanvas = document.createElement('canvas');
        const ctx = textCanvas.getContext('2d');

        function updateText() {
            textCanvas.width = window.innerWidth;
            textCanvas.height = window.innerHeight;
            ctx.clearRect(0, 0, textCanvas.width, textCanvas.height);
            
            // Stile scritta: Bianca, Bold, in basso
            // Nota: "900" è il font-weight (extra bold)
            ctx.font = '900 4vh Bebas neue, Bebas neue, sans-serif';
            ctx.fillStyle = '#FFFFFF';
            ctx.textAlign = 'center';
            ctx.letterSpacing = '4px';

            const text = "ACTIVATE YOUR SUBCONSCIOUS";
            // Posizionato al 93% dell'altezza
            ctx.fillText(text, textCanvas.width / 2, textCanvas.height * 0.93);
        }

        // Inizializza il testo e aggiorna al ridimensionamento finestra
        updateText();
        window.addEventListener('resize', updateText);
        
        // Carica il canvas del testo nella sorgente s0
        s0.init({ src: textCanvas, dynamic: true });

        // --- SCRIPT VISUALE "THE SUBSTANCE" ---
        src(o0)
          .scale(1.05) // Leggero zoom per creare fluidità in avanti
          .modulate(noise(3, 0.1)) // Aggiunge imperfezioni organiche al movimento
          .blend(
            voronoi(8, 2, 5) // La base cellulare (8 celle, contorni morbidi)
              .modulateScale(osc(10, 0.1, 0.5), 0.5) // Pulsazione ritmica
              .modulateRotate(noise(2, 0.2), () => (mouse.x * 0.005)) // Rotazione basata su mouse X
              .thresh(0.3, 0.0) // Taglio netto membrane
              // Gestione Colore: Mix tra carne e siero
              .color(
                () => 1 + (mouse.y * 0.001), // Rosso
                () => 0.4 + (mouse.y * 0.005), // Verde (aumenta col mouse Y)
                () => 0.4 // Blu basso
              )
              .contrast(1.4)
              .brightness(0.1),
            0.1 // Quantità di blending (scia viscosa)
          )
          .modulatePixelate(noise(25, 0.5), 100, 8) // Pixelation organica sui bordi
          .layer(src(s0)) // Sovrappone la scritta creata sopra
          .out(o0);

    </script>
</body>
</html>
